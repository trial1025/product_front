import{_ as P,M as v,L as k,K as w,O as B,P as m,R as y,S as a,c as t,a9 as R,V,aa as p,Z as n,a1 as u,ab as A,J as S,a6 as L,a2 as C,x as b,A as N,ac as T,Q as z,W as U,U as j,a3 as D,ad as F,ae as I}from"./index-c3534208.js";import{_ as M}from"./user-a7f6648a.js";import{V as c}from"./VCol-311b9180.js";import{V as _}from"./VRow-3a635517.js";import{V as $}from"./VContainer-7c8c2054.js";import{V as E}from"./VDivider-5f160321.js";const J={__name:"ProductCard",props:["_id","category","subs","condition","description","image","name","price","sell","account"],setup(o){const{apiAuth:g}=C(),d=v(),i=k(),f=w(),h=o,l=async()=>{var r,e;if(!d.isLogin){f.push("/login");return}try{const{data:s}=await g.patch("/users/favorite",{product:h._id});d.favorite=s.result,i({text:"加入最愛成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}})}catch(s){const x=((e=(r=s==null?void 0:s.response)==null?void 0:r.data)==null?void 0:e.message)||"發生錯誤，請稍後再試";i({text:x,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}};return(r,e)=>{const s=B("RouterLink");return m(),y(L,{class:"product-card",rounded:"",hover:"",height:"350px","d-flex":"","justify-center":"",style:{"text-align":"left"}},{default:a(()=>[t(c,null,{default:a(()=>[t(_,null,{default:a(()=>[t(c,{cols:"2"},{default:a(()=>[t(R,{class:"mb-2",size:"30",style:{"margin-left":"10px"}},{default:a(()=>[t(V,{src:M})]),_:1})]),_:1}),t(c,{cols:"10"},{default:a(()=>[t(p,{class:"py-1 m-0"},{default:a(()=>[n(u(o.account),1)]),_:1})]),_:1})]),_:1}),t(V,{src:o.image,cover:"",style:{width:"90%",height:"200px",margin:"auto",borderRadius:"10px"}},null,8,["src"]),t(p,{class:"py-1"},{default:a(()=>[n(u(o.category),1),t(s,{class:"text-decoration-none",to:"/products/"+o._id,style:{"padding-top":"2px","padding-bottom":"2px",color:"black"}},{default:a(()=>[n(u(o.name),1)]),_:1},8,["to"])]),_:1})]),_:1}),t(_,null,{default:a(()=>[t(c,{class:"ml-2 py-0",cols:"7"},{default:a(()=>[t(p,{class:"p4",style:{"font-size":"large","font-weight":"bolder"}},{default:a(()=>[n("NT$"+u(o.price),1)]),_:1}),t(p,{class:"p4"},{default:a(()=>[n(u(o.condition),1)]),_:1})]),_:1}),t(c,{class:"ml-2 py-0",cols:"4"},{default:a(()=>[t(A,{class:"p4"},{default:a(()=>[t(S,{color:"red","prepend-icon":"mdi-cards-heart-outline",onClick:l})]),_:1})]),_:1})]),_:1})]),_:1})}}},K=P(J,[["__scopeId","data-v-8cfa6b43"]]),O=D("h2",null,"商品列表",-1),X={__name:"SellView",setup(o){const g=v(),{apiAuth:d}=C(),i=k(),f=b([]),h=b({account:g.account});return N(async()=>{var l,r;try{const{data:e}=await d.get("/products",{params:{itemsPerPage:-1}}),s=e.result.data.filter(x=>x.account!==h.value.account);f.value.push(...s),await T()}catch(e){console.log(e);const s=((r=(l=e==null?void 0:e.response)==null?void 0:l.data)==null?void 0:r.message)||"發生錯誤，請稍後再試";i({text:s,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}}),(l,r)=>(m(),y($,null,{default:a(()=>[t(_,{justify:"center","align-item-center":""},{default:a(()=>[t(c,{cols:"10"},{default:a(()=>[O]),_:1}),t(E),t(c,{cols:"10"},{default:a(()=>[t(_,null,{default:a(()=>[(m(!0),z(j,null,U(f.value,e=>(m(),y(c,{class:"mb-4",key:e._id,cols:"12",md:"4",lg:"3",xl:"3"},{default:a(()=>[t(K,F(I(e)),null,16)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1}))}};export{X as default};
