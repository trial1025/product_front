import{_ as C,L as B,M as L,N as I,P as _,Q as R,S as T,T as t,a6 as A,c as e,ao as F,V as M,Y as o,ar as N,as as f,J as j,$ as u,a3 as P,a4 as U,a5 as $}from"./index-eaf8c9cf.js";import{_ as q}from"./logo-lg-6f8cbc36.js";import{c as D,a as g,u as J,d as h,V as Q}from"./index.esm-955770b4.js";import{V as Y,a as m}from"./VCol-588ff303.js";import{V as z}from"./VDivider-fe779e83.js";import{V}from"./VRow-8ff753bf.js";const E=l=>(P("data-v-60d9de17"),l=l(),U(),l),G=E(()=>$("h1",{class:"text-center mt-6"},"登入",-1)),H={__name:"LoginView",setup(l){const{api:x}=A(),v=B(),p=L(),w=I(),y=D({account:g().required("帳號為必填欄位").min(4,"使用者帳號長度不符").max(20,"使用者帳號長度不符"),password:g().required("密碼為必填欄位").min(4,"密碼長度不符").max(20,"密碼長度不符")}),{handleSubmit:b,isSubmitting:S}=J({validationSchema:y}),c=h("account"),i=h("password"),k=b(async d=>{var s,n;try{const{data:a}=await x.post("/users/login",{account:d.account,password:d.password});w.login(a.result),p({text:"登入成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),v.push("/")}catch(a){console.log(a);const r=((n=(s=a==null?void 0:a.response)==null?void 0:s.data)==null?void 0:n.message)||"發生錯誤，請稍後再試";p({text:r,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}});return(d,s)=>{const n=_("RouterLink"),a=_("VText");return R(),T(Y,{class:"d-flex"},{default:t(()=>[e(V,{justify:"center",align:"center",style:{height:"80vh"}},{default:t(()=>[e(m,null,{default:t(()=>[e(F,{class:"pa-5 mx-auto",elevation:"2",style:{height:"80vh"},rounded:"md",theme:"light","max-width":"400px"},{default:t(()=>[e(M,{class:"my-auto",src:q,"max-width":"200px"}),e(z,{class:"my-2"}),G,e(m,{cols:"12"},{default:t(()=>[e(Q,{class:"my-6",disabled:o(S),onSubmit:N(o(k),["prevent"])},{default:t(()=>[e(f,{variant:"outlined","hide-details":"auto",label:"帳號",color:"#2A5264",density:"compact",minlength:"4",maxlength:"20",counter:"",modelValue:o(c).value.value,"onUpdate:modelValue":s[0]||(s[0]=r=>o(c).value.value=r),"error-messages":o(c).errorMessage.value,"bg-color":"white"},null,8,["modelValue","error-messages"]),e(f,{variant:"outlined","hide-details":"auto",color:"#2A5264",density:"compact",label:"密碼",type:"password",minlength:"4",maxlength:"20",counter:"",modelValue:o(i).value.value,"onUpdate:modelValue":s[1]||(s[1]=r=>o(i).value.value=r),"error-messages":o(i).errorMessage.value,"bg-color":"white"},null,8,["modelValue","error-messages"]),e(V,{class:"justify-center my-2"},{default:t(()=>[e(m,{class:"d-flex justify-center",cols:"12"},{default:t(()=>[e(j,{type:"submit",elevation:"1",color:"red-darken-1"},{default:t(()=>[u("登入")]),_:1})]),_:1}),e(a,{class:"text-center my-4"},{default:t(()=>[u("還沒有帳號嗎？"),e(n,{class:"text-decoration-none",to:{name:"Register"},style:{color:"#2A5264","font-weight":"border"}},{default:t(()=>[u("建立帳號")]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},te=C(H,[["__scopeId","data-v-60d9de17"]]);export{te as default};
