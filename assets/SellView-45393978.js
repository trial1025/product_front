import{_ as P,M as v,L as k,K as w,O as B,P as p,R as x,S as e,c as t,a9 as R,V as y,aa as h,Z as d,a1 as m,J as S,a6 as A,a2 as C,x as V,A as L,ab as N,Q as T,W as z,U,a5 as j,ac as D,ad as F}from"./index-ecf5c5a3.js";import{_ as I}from"./user-a7f6648a.js";import{V as o}from"./VCol-cd3a08e5.js";import{V as b}from"./VRow-765920e7.js";import{V as M}from"./VContainer-083158bc.js";import{V as $}from"./VDivider-5d6183ce.js";const E={__name:"ProductCard",props:["_id","category","subs","condition","description","image","name","price","sell","account"],setup(c){const{apiAuth:_}=C(),n=v(),u=k(),i=w(),f=c,l=async()=>{var r,a;if(!n.isLogin){i.push("/login");return}try{const{data:s}=await _.patch("/users/favorite",{product:f._id});n.favorite=s.result,u({text:"加入最愛成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}})}catch(s){const g=((a=(r=s==null?void 0:s.response)==null?void 0:r.data)==null?void 0:a.message)||"發生錯誤，請稍後再試";u({text:g,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}};return(r,a)=>{const s=B("RouterLink");return p(),x(A,{class:"product-card",rounded:"",hover:"",height:"350px","d-flex":"","justify-center":"",style:{"text-align":"left"}},{default:e(()=>[t(o,null,{default:e(()=>[t(b,null,{default:e(()=>[t(o,{cols:"3",style:{height:"40px"}},{default:e(()=>[t(R,{size:"30",style:{"margin-left":"30%"}},{default:e(()=>[t(y,{src:I})]),_:1})]),_:1}),t(o,{cols:"9",style:{height:"40px"}},{default:e(()=>[t(h,{class:"py-1 m-0"},{default:e(()=>[d(m(c.account),1)]),_:1})]),_:1}),t(o,{class:"pb-0",cols:"12"},{default:e(()=>[t(y,{cols:"10",src:c.image,cover:"",style:{width:"90%",height:"200px",margin:"auto",borderRadius:"10px"}},null,8,["src"]),t(s,{class:"name ml-4",to:"/products/"+c._id},{default:e(()=>[d(m(c.name),1)]),_:1},8,["to"])]),_:1}),t(o,{class:"py-0",cols:"9"},{default:e(()=>[t(h,{class:"p4",style:{"font-size":"large","font-weight":"bolder"}},{default:e(()=>[d("NT$"+m(c.price),1)]),_:1}),t(h,{class:"p4"},{default:e(()=>[d(m(c.condition),1)]),_:1})]),_:1}),t(o,{cols:"3"},{default:e(()=>[t(S,{class:"pa-0",block:"",color:"red",variant:"text","x-small":"","prepend-icon":"mdi-cards-heart-outline",onClick:l})]),_:1})]),_:1})]),_:1})]),_:1})}}},J=P(E,[["__scopeId","data-v-9c1c7bb6"]]),K=j("h2",null,"商品列表",-1),H={__name:"SellView",setup(c){const _=v(),{apiAuth:n}=C(),u=k(),i=V([]),f=V({account:_.account});return L(async()=>{var l,r;try{const{data:a}=await n.get("/products",{params:{itemsPerPage:-1}}),s=a.result.data.filter(g=>g.account!==f.value.account);i.value.push(...s),await N()}catch(a){console.log(a);const s=((r=(l=a==null?void 0:a.response)==null?void 0:l.data)==null?void 0:r.message)||"發生錯誤，請稍後再試";u({text:s,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}}),(l,r)=>(p(),x(M,null,{default:e(()=>[t(b,{justify:"center","align-item-center":""},{default:e(()=>[t(o,{cols:"10"},{default:e(()=>[K]),_:1}),t($),t(o,{cols:"12",lg:"10",xl:"10"},{default:e(()=>[t(b,null,{default:e(()=>[(p(!0),T(U,null,z(i.value,a=>(p(),x(o,{class:"mb-4",key:a._id,cols:"12",sm:"6",md:"4",lg:"3",xl:"2"},{default:e(()=>[t(J,D(F(a)),null,16)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1}))}};export{H as default};
