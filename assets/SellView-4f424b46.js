import{_ as k,M as y,L as b,K as P,O as v,P as m,R as h,S as o,c as e,a8 as i,Z as u,a1 as p,V as w,a9 as B,J as R,aa as S,a2 as C,x,A,ab as L,Q as N,W as T,U,a5 as z,ac as D,ad as I}from"./index-433f0d0b.js";import{V as M}from"./VContainer-7584cbca.js";import{V}from"./VCol-ed492436.js";import{V as $}from"./VDivider-e6fe7379.js";import{V as j}from"./VRow-628456ed.js";const q={__name:"ProductCard",props:["_id","category","subs","condition","description","image","name","price","sell","account"],setup(s){const{apiAuth:_}=C(),n=y(),l=b(),d=P(),f=s,r=async()=>{var c,t;if(!n.isLogin){d.push("/login");return}try{const{data:a}=await _.patch("/users/cart",{product:f._id,quantity:1});n.cart=a.result,l({text:"新增成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}})}catch(a){const g=((t=(c=a==null?void 0:a.response)==null?void 0:c.data)==null?void 0:t.message)||"發生錯誤，請稍後再試";l({text:g,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}};return(c,t)=>{const a=v("RouterLink");return m(),h(S,{class:"product-card",rounded:"",hover:"",height:"350px",style:{"text-align":"left"}},{default:o(()=>[e(i,{style:{"padding-top":"4px","padding-bottom":"4px"}},{default:o(()=>[u(p(s.account),1)]),_:1}),e(w,{src:s.image,cover:"",style:{width:"90%",height:"200px",margin:"auto",borderRadius:"10px"}},null,8,["src"]),e(i,{class:"p4"},{default:o(()=>[e(a,{class:"text-decoration-none",to:"/products/"+s._id,style:{"padding-top":"2px","padding-bottom":"2px",color:"black"}},{default:o(()=>[u(p(s.name),1)]),_:1},8,["to"])]),_:1}),e(i,{class:"p4",style:{"font-size":"large","font-weight":"bolder"}},{default:o(()=>[u("NT$"+p(s.price),1)]),_:1}),e(i,{class:"p4"},{default:o(()=>[u(p(s.condition),1)]),_:1}),e(B,{class:"p4"},{default:o(()=>[e(R,{color:"red","prepend-icon":"mdi-cards-heart-outline",onClick:r})]),_:1})]),_:1})}}},E=k(q,[["__scopeId","data-v-c2e4ce46"]]),F=z("h1",null,"商品列表",-1),Z={__name:"SellView",setup(s){const _=y(),{apiAuth:n}=C(),l=b(),d=x([]),f=x({account:_.account});return A(async()=>{var r,c;try{const{data:t}=await n.get("/products",{params:{itemsPerPage:-1}}),a=t.result.data.filter(g=>g.account!==f.value.account);d.value.push(...a),await L()}catch(t){console.log(t);const a=((c=(r=t==null?void 0:t.response)==null?void 0:r.data)==null?void 0:c.message)||"發生錯誤，請稍後再試";l({text:a,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}}),(r,c)=>(m(),h(M,{cols:"8"},{default:o(()=>[e(j,{justify:"center","align-item-center":""},{default:o(()=>[e(V,{cols:"10"},{default:o(()=>[F]),_:1}),e($),(m(!0),N(U,null,T(d.value,t=>(m(),h(V,{key:t._id,cols:"12",sm:"6",md:"4",lg:"3",xl:"2"},{default:o(()=>[e(E,D(I(t)),null,16)]),_:2},1024))),128))]),_:1})]),_:1}))}};export{Z as default};
