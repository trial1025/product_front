import{_ as g}from"./user-a7f6648a.js";import{M as x,N as k,L as v,x as C,A as b,P as w,Q as d,S as V,T as e,a6 as B,c as t,R,X as A,W as N,a5 as L,ao as P,at as S,V as h,au as i,$ as n,a1 as p,ay as T,J as I,Z as $}from"./index-71158f2c.js";import{V as D,a as r}from"./VCol-784b7480.js";import{V as M}from"./VDivider-a357f24b.js";import{V as f}from"./VRow-011ac4ad.js";const j=L("h2",null,"追蹤清單",-1),W={__name:"CartView",setup(z){const{apiAuth:_}=B(),u=x();k(),v();const c=C([]),y=async s=>{var l,o;try{await _.delete("/favorite/products/"+s),u({text:"刪除成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),c.value=c.value.filter(a=>a._id!==s)}catch(a){const m=((o=(l=a==null?void 0:a.response)==null?void 0:l.data)==null?void 0:o.message)||"發生錯誤，請稍後再試";u({text:m,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}};return b(async()=>{var s,l;try{const{data:o}=await _.get("/users/favorite");c.value.push(...o.result)}catch(o){console.log(o);const a=((l=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:l.message)||"發生錯誤，請稍後再試";u({text:a,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}}),(s,l)=>{const o=w("RouterLink");return d(),V(D,{"d-flex":"",style:{}},{default:e(()=>[t(f,{justify:"center",align:"center"},{default:e(()=>[t(r,{cols:"10"},{default:e(()=>[j]),_:1}),t(M),t(r,{cols:"10"},{default:e(()=>[t(f,null,{default:e(()=>[(d(!0),R(N,null,A(c.value,a=>(d(),V(r,{key:a._id,cols:"3"},{default:e(()=>[t(P,{height:"360px",elevation:""},{default:e(()=>[t(o,{class:"text-decoration-none",to:"/products/"+a.product._id,style:{color:"black"}},{default:e(()=>[t(f,null,{default:e(()=>[t(r,{cols:"2"},{default:e(()=>[t(S,{class:"my-2",size:"30",style:{"margin-left":"10px"}},{default:e(()=>[t(h,{src:g})]),_:1})]),_:1}),t(r,null,{default:e(()=>[t(i,{class:"py-2"},{default:e(()=>[n("@"+p(a.product.account),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),t(h,{src:a.product.image,cover:"",style:{width:"90%",height:"200px",margin:"auto",borderRadius:"10px"}},null,8,["src"]),t(i,{class:"py-0"},{default:e(()=>[n(p(a.product.name),1)]),_:2},1024),t(i,{class:"py-0",style:{"font-weight":"bold"}},{default:e(()=>[n("NT$"+p(a.product.price),1)]),_:2},1024)]),_:2},1032,["to"]),t(T,{class:"py-0"},{default:e(()=>[t(I,{color:"red",icon:"",onClick:m=>y(a._id)},{default:e(()=>[t($,null,{default:e(()=>[n("mdi-heart")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})}}};export{W as default};
