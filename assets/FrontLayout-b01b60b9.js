import{p as E,m as J,a as K,g as R,u as H,c as l,b as te,d as ae,e as oe,f as le,h as ne,t as q,i as se,j as re,k as ue,l as ie,n as ce,s as w,o as g,q as de,V as Q,r as O,v as D,w as ve,x as G,y as me,z as F,A as ge,B as fe,C as he,D as pe,E as be,F as ye,G as A,H as xe,I as Ve,J as z,_ as _e,K as ke,L as Se,M as we,N as Te,O as Be,P as u,Q as S,R as m,S as n,T as _,U as B,W as M,X as W,Y as P,Z as V,$ as Le,a0 as Ie,a1 as L,a2 as Ce}from"./index-c3534208.js";import{V as Pe,a as Ne}from"./VNavigationDrawer-f363d4a1.js";import{u as Ae,V as Y,a as Ee}from"./VList-32e8da77.js";import{V as N,a as $}from"./VListItem-41fb380b.js";import{V as Re}from"./VContainer-7c8c2054.js";import{V as He}from"./VMenu-1d56ed36.js";import"./VDivider-5f160321.js";const X=E({text:String,...J(),...K()},"VToolbarTitle"),Z=R()({name:"VToolbarTitle",props:X(),setup(e,f){let{slots:a}=f;return H(()=>{const h=!!(a.default||a.text||e.text);return l(e.tag,{class:["v-toolbar-title",e.class],style:e.style},{default:()=>{var o;return[h&&l("div",{class:"v-toolbar-title__placeholder"},[a.text?a.text():e.text,(o=a.default)==null?void 0:o.call(a)])]}})}),{}}}),Ue=[null,"prominent","default","comfortable","compact"],ee=E({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>Ue.includes(e)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...te(),...J(),...ae(),...oe(),...K({tag:"header"}),...le()},"VToolbar"),j=R()({name:"VToolbar",props:ee(),setup(e,f){var t;let{slots:a}=f;const{backgroundColorClasses:h,backgroundColorStyles:o}=ne(q(e,"color")),{borderClasses:r}=se(e),{elevationClasses:b}=re(e),{roundedClasses:p}=ue(e),{themeClasses:y}=ie(e),{rtlClasses:x}=ce(),i=w(!!(e.extended||(t=a.extension)!=null&&t.call(a))),v=g(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),d=g(()=>i.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return de({VBtn:{variant:"text"}}),H(()=>{var c;const s=!!(e.title||a.title),T=!!(a.image||e.image),U=(c=a.extension)==null?void 0:c.call(a);return i.value=!!(e.extended||U),l(e.tag,{class:["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},h.value,r.value,b.value,p.value,y.value,x.value,e.class],style:[o.value,e.style]},{default:()=>[T&&l("div",{key:"image",class:"v-toolbar__image"},[a.image?l(O,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},a.image):l(Q,{key:"image-img",cover:!0,src:e.image},null)]),l(O,{defaults:{VTabs:{height:D(v.value)}}},{default:()=>{var k,I,C;return[l("div",{class:"v-toolbar__content",style:{height:D(v.value)}},[a.prepend&&l("div",{class:"v-toolbar__prepend"},[(k=a.prepend)==null?void 0:k.call(a)]),s&&l(Z,{key:"title",text:e.title},{text:a.title}),(I=a.default)==null?void 0:I.call(a),a.append&&l("div",{class:"v-toolbar__append"},[(C=a.append)==null?void 0:C.call(a)])])]}}),l(O,{defaults:{VTabs:{height:D(d.value)}}},{default:()=>[l(ve,null,{default:()=>[i.value&&l("div",{class:"v-toolbar__extension",style:{height:D(d.value)}},[U])]})]})]})}),{contentHeight:v,extensionHeight:d}}}),De=E({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Fe(e){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:a}=f;let h=0;const o=G(null),r=w(0),b=w(0),p=w(0),y=w(!1),x=w(!1),i=g(()=>Number(e.scrollThreshold)),v=g(()=>me((i.value-r.value)/i.value||0)),d=()=>{const t=o.value;!t||a&&!a.value||(h=r.value,r.value="window"in t?t.pageYOffset:t.scrollTop,x.value=r.value<h,p.value=Math.abs(r.value-i.value))};return F(x,()=>{b.value=b.value||r.value}),F(y,()=>{b.value=0}),ge(()=>{F(()=>e.scrollTarget,t=>{var T;const s=t?document.querySelector(t):window;s&&s!==o.value&&((T=o.value)==null||T.removeEventListener("scroll",d),o.value=s,o.value.addEventListener("scroll",d,{passive:!0}))},{immediate:!0})}),fe(()=>{var t;(t=o.value)==null||t.removeEventListener("scroll",d)}),a&&F(a,d,{immediate:!0}),{scrollThreshold:i,currentScroll:r,currentThreshold:p,isScrollActive:y,scrollRatio:v,isScrollingUp:x,savedScroll:b}}const Me=E({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...ee(),...he(),...De(),height:{type:[Number,String],default:64}},"VAppBar"),$e=R()({name:"VAppBar",props:Me(),emits:{"update:modelValue":e=>!0},setup(e,f){let{slots:a}=f;const h=G(),o=pe(e,"modelValue"),r=g(()=>{var k;const c=new Set(((k=e.scrollBehavior)==null?void 0:k.split(" "))??[]);return{hide:c.has("hide"),inverted:c.has("inverted"),collapse:c.has("collapse"),elevate:c.has("elevate"),fadeImage:c.has("fade-image")}}),b=g(()=>{const c=r.value;return c.hide||c.inverted||c.collapse||c.elevate||c.fadeImage||!o.value}),{currentScroll:p,scrollThreshold:y,isScrollingUp:x,scrollRatio:i}=Fe(e,{canScroll:b}),v=g(()=>e.collapse||r.value.collapse&&(r.value.inverted?i.value>0:i.value===0)),d=g(()=>e.flat||r.value.elevate&&(r.value.inverted?p.value>0:p.value===0)),t=g(()=>r.value.fadeImage?r.value.inverted?1-i.value:i.value:void 0),s=g(()=>{var I,C;if(r.value.hide&&r.value.inverted)return 0;const c=((I=h.value)==null?void 0:I.contentHeight)??0,k=((C=h.value)==null?void 0:C.extensionHeight)??0;return c+k});be(g(()=>!!e.scrollBehavior),()=>{xe(()=>{r.value.hide?r.value.inverted?o.value=p.value>y.value:o.value=x.value||p.value<y.value:o.value=!0})});const{ssrBootStyles:T}=Ae(),{layoutItemStyles:U}=ye({id:e.name,order:g(()=>parseInt(e.order,10)),position:q(e,"location"),layoutSize:s,elementSize:w(void 0),active:o,absolute:q(e,"absolute")});return H(()=>{const c=j.filterProps(e);return l(j,A({ref:h,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...U.value,"--v-toolbar-image-opacity":t.value,height:void 0,...T.value},e.style]},c,{collapse:v.value,flat:d.value}),a)}),{}}}),ze=E({...Ve({icon:"$menu",variant:"text"})},"VAppBarNavIcon"),Oe=R()({name:"VAppBarNavIcon",props:ze(),setup(e,f){let{slots:a}=f;return H(()=>l(z,A(e,{class:["v-app-bar-nav-icon"]}),a)),{}}}),qe=R()({name:"VAppBarTitle",props:X(),setup(e,f){let{slots:a}=f;return H(()=>l(Z,A(e,{class:"v-app-bar-title"}),a)),{}}}),Ge=""+new URL("v3rb-e74dda82.png",import.meta.url).href;const We={key:1,class:"text-center"},Ye={__name:"FrontLayout",setup(e){const{apiAuth:f}=Ce(),a=ke(),h=Se(),o=we(),{mobile:r}=Te(),b=g(()=>r.value),p=G(!1),y=g(()=>[{to:"/sell",text:"二手商店",show:!0},{to:"/cart",icon:"mdi-heart-outline",show:!0},{icon:"mdi-account-circle",show:!o.isLogin,subItems:[{to:"/login",text:"登入",icon:"mdi-login",show:!o.isLogin},{to:"/register",text:"註冊",icon:"mdi-account-plus",show:!o.isLogin}]},{icon:"mdi-account",show:o.isLogin,subItems:[{to:"/orders",text:"訂單",icon:"mdi-list-box",show:!0},{to:"/user",text:"個人資料",icon:"mdi-account-outline",show:o.isLogin},{to:"/user/userproducts",text:"我的商品",icon:"mdi-shopping-outline",show:o.isLogin},{to:"/user/userorders",text:"我的訂單",icon:"mdi-clipboard-text-outline",show:o.isLogin}]},{icon:"mdi-cog",show:o.isLogin&&o.isAdmin,subItems:[{to:"/admin",text:"管理員資料",icon:"mdi-account-outline",show:o.isLogin},{to:"/admin/products",text:"商品管理",icon:"mdi-shopping-outline",show:o.isLogin},{to:"/admin/orders",text:"訂單管理",icon:"mdi-clipboard-text-outline",show:o.isLogin}]}]),x=async()=>{var i,v;try{await f.delete("/users/logout"),o.logout(),h({text:"登出成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),a.push("/")}catch(d){const t=((v=(i=d==null?void 0:d.response)==null?void 0:i.data)==null?void 0:v.message)||"發生錯誤，請稍後再試";h({text:t,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}};return(i,v)=>{const d=Be("RouterView");return u(),S(B,null,[b.value?(u(),m(Pe,{key:0,modelValue:p.value,"onUpdate:modelValue":v[0]||(v[0]=t=>p.value=t),temporary:"",location:"left"},{default:n(()=>[l(Y,{nav:"",density:"compact"},{default:n(()=>[(u(!0),S(B,null,M(y.value,t=>(u(),S(B,{key:t},[t.subItems&&t.subItems.length>0?(u(),m(Ee,{key:0,modelValue:t.active,"onUpdate:modelValue":s=>t.active=s,"prepend-icon":t.icon},Ie({default:n(()=>[(u(!0),S(B,null,M(t.subItems,s=>(u(),m(N,{key:s.to,to:s.to},{default:n(()=>[l(P,{class:"mx-2",icon:s.icon,size:18},null,8,["icon"]),V(L(s.text),1)]),_:2},1032,["to"]))),128))]),_:2},[t.show?{name:"activator",fn:n(({props:s})=>[l(N,A(s,{rounded:"xl"}),{default:n(()=>[l($,null,{default:n(()=>[V(L(t.text),1)]),_:2},1024)]),_:2},1040)]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","prepend-icon"])):(u(),m(N,{key:1,to:t.to},{default:n(()=>[t.icon?(u(),m(P,{key:0,icon:t.icon},null,8,["icon"])):_("",!0),l($,{style:{"text-align":"center"}},{default:n(()=>[V(L(t.text),1)]),_:2},1024)]),_:2},1032,["to"]))],64))),128)),W(o).isLogin?(u(),m(N,{key:0,onClick:x},{prepend:n(()=>[l(P,{icon:"mdi-logout"})]),default:n(()=>[l($,null,{default:n(()=>[V("登出")]),_:1})]),_:1})):_("",!0)]),_:1})]),_:1},8,["modelValue"])):_("",!0),l($e,{class:"custom-app-bar bg",density:"compact",elevation:0},{default:n(()=>[l(Re,{class:"d-flex align-center"},{default:n(()=>[l(Q,{src:Ge,"max-height":"30","max-width":"30"}),l(z,{to:"/",active:!1},{default:n(()=>[l(qe,null,{default:n(()=>[V("NEWSHOT")]),_:1})]),_:1}),l(Le),b.value?(u(),m(Oe,{key:0,onClick:v[1]||(v[1]=t=>p.value=!0)})):(u(),S("div",We,[(u(!0),S(B,null,M(y.value,t=>(u(),m(He,{key:t.to,"open-on-hover":""},{activator:n(({props:s})=>[t.show?(u(),m(z,A({key:0},s,{text:"",key:t.to,to:t.to}),{default:n(()=>[t.icon?(u(),m(P,{key:0},{default:n(()=>[V(L(t.icon),1)]),_:2},1024)):_("",!0),V(L(t.text),1)]),_:2},1040,["to"])):_("",!0)]),default:n(()=>[t.subItems&&t.subItems.length>0?(u(),m(Y,{key:0},{default:n(()=>[(u(!0),S(B,null,M(t.subItems,s=>(u(),m(N,{key:s.to,to:s.to},{default:n(()=>[s.show?(u(),m($,{key:0},{default:n(()=>[l(P,{class:"mx-2",icon:s.icon,size:16},null,8,["icon"]),V(L(s.text),1)]),_:2},1024)):_("",!0)]),_:2},1032,["to"]))),128))]),_:2},1024)):_("",!0)]),_:2},1024))),128))])),W(o).isLogin?(u(),m(z,{key:2,"prepend-icon":"mdi-logout",onClick:x},{default:n(()=>[V("登出")]),_:1})):_("",!0)]),_:1})]),_:1}),l(Ne,{style:{"background-color":"#E1E8EE"}},{default:n(()=>[(u(),m(d,{key:i.$route.path}))]),_:1})],64)}}},tt=_e(Ye,[["__scopeId","data-v-8a970a0b"]]);export{tt as default};
