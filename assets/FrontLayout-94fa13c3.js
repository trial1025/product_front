import{p as I,m as j,a as q,g as L,u as P,c as o,b as X,d as Z,e as ee,f as te,h as ae,t as H,i as oe,j as le,k as se,l as ne,n as me,s as S,o as d,q as ge,V as re,r as Y,v as F,w as he,x as G,y as fe,z as D,A as be,B as ye,C as ue,D as pe,E as Ve,F as ie,G as U,H as _e,I as xe,J as O,K as ke,_ as Se,L as we,M as Te,N as Be,O as Ce,P as J,Q as i,R as T,S as y,T as s,U as k,W as C,X as $,Y as W,Z as R,$ as x,a0 as Ie,a1 as B,a2 as Le,a3 as Pe,a4 as Ne,a5 as Ae,a6 as Re}from"./index-197d9177.js";import{V as Ee,a as Fe}from"./VNavigationDrawer-94d2ca90.js";import{u as He}from"./ssrBoot-253e77d4.js";import{V as E,a as M}from"./VListItem-7fff78a1.js";import{V as K,a as Ue}from"./VList-52b7ab26.js";import{V as ze,a as De}from"./VCol-51a39ae5.js";import{V as $e}from"./VRow-6f4481b0.js";import{V as Me}from"./VMenu-b4aff41d.js";import"./VDivider-bb5790d4.js";const ce=I({text:String,...j(),...q()},"VToolbarTitle"),de=L()({name:"VToolbarTitle",props:ce(),setup(e,h){let{slots:t}=h;return P(()=>{const f=!!(t.default||t.text||e.text);return o(e.tag,{class:["v-toolbar-title",e.class],style:e.style},{default:()=>{var a;return[f&&o("div",{class:"v-toolbar-title__placeholder"},[t.text?t.text():e.text,(a=t.default)==null?void 0:a.call(t)])]}})}),{}}}),Oe=[null,"prominent","default","comfortable","compact"],ve=I({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>Oe.includes(e)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...X(),...j(),...Z(),...ee(),...q({tag:"header"}),...te()},"VToolbar"),Q=L()({name:"VToolbar",props:ve(),setup(e,h){var u;let{slots:t}=h;const{backgroundColorClasses:f,backgroundColorStyles:a}=ae(H(e,"color")),{borderClasses:n}=oe(e),{elevationClasses:p}=le(e),{roundedClasses:b}=se(e),{themeClasses:_}=ne(e),{rtlClasses:V}=me(),c=S(!!(e.extended||(u=t.extension)!=null&&u.call(t))),v=d(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),m=d(()=>c.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return ge({VBtn:{variant:"text"}}),P(()=>{var g;const l=!!(e.title||t.title),r=!!(t.image||e.image),z=(g=t.extension)==null?void 0:g.call(t);return c.value=!!(e.extended||z),o(e.tag,{class:["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},f.value,n.value,p.value,b.value,_.value,V.value,e.class],style:[a.value,e.style]},{default:()=>[r&&o("div",{key:"image",class:"v-toolbar__image"},[t.image?o(Y,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},t.image):o(re,{key:"image-img",cover:!0,src:e.image},null)]),o(Y,{defaults:{VTabs:{height:F(v.value)}}},{default:()=>{var w,N,A;return[o("div",{class:"v-toolbar__content",style:{height:F(v.value)}},[t.prepend&&o("div",{class:"v-toolbar__prepend"},[(w=t.prepend)==null?void 0:w.call(t)]),l&&o(de,{key:"title",text:e.title},{text:t.title}),(N=t.default)==null?void 0:N.call(t),t.append&&o("div",{class:"v-toolbar__append"},[(A=t.append)==null?void 0:A.call(t)])])]}}),o(Y,{defaults:{VTabs:{height:F(m.value)}}},{default:()=>[o(he,null,{default:()=>[c.value&&o("div",{class:"v-toolbar__extension",style:{height:F(m.value)}},[z])]})]})]})}),{contentHeight:v,extensionHeight:m}}}),Ye=I({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function je(e){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:t}=h;let f=0;const a=G(null),n=S(0),p=S(0),b=S(0),_=S(!1),V=S(!1),c=d(()=>Number(e.scrollThreshold)),v=d(()=>fe((c.value-n.value)/c.value||0)),m=()=>{const u=a.value;!u||t&&!t.value||(f=n.value,n.value="window"in u?u.pageYOffset:u.scrollTop,V.value=n.value<f,b.value=Math.abs(n.value-c.value))};return D(V,()=>{p.value=p.value||n.value}),D(_,()=>{p.value=0}),be(()=>{D(()=>e.scrollTarget,u=>{var r;const l=u?document.querySelector(u):window;l&&l!==a.value&&((r=a.value)==null||r.removeEventListener("scroll",m),a.value=l,a.value.addEventListener("scroll",m,{passive:!0}))},{immediate:!0})}),ye(()=>{var u;(u=a.value)==null||u.removeEventListener("scroll",m)}),t&&D(t,m,{immediate:!0}),{scrollThreshold:c,currentScroll:n,currentThreshold:b,isScrollActive:_,scrollRatio:v,isScrollingUp:V,savedScroll:p}}const qe=I({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...ve(),...ue(),...Ye(),height:{type:[Number,String],default:64}},"VAppBar"),Ge=L()({name:"VAppBar",props:qe(),emits:{"update:modelValue":e=>!0},setup(e,h){let{slots:t}=h;const f=G(),a=pe(e,"modelValue"),n=d(()=>{var w;const g=new Set(((w=e.scrollBehavior)==null?void 0:w.split(" "))??[]);return{hide:g.has("hide"),inverted:g.has("inverted"),collapse:g.has("collapse"),elevate:g.has("elevate"),fadeImage:g.has("fade-image")}}),p=d(()=>{const g=n.value;return g.hide||g.inverted||g.collapse||g.elevate||g.fadeImage||!a.value}),{currentScroll:b,scrollThreshold:_,isScrollingUp:V,scrollRatio:c}=je(e,{canScroll:p}),v=d(()=>e.collapse||n.value.collapse&&(n.value.inverted?c.value>0:c.value===0)),m=d(()=>e.flat||n.value.elevate&&(n.value.inverted?b.value>0:b.value===0)),u=d(()=>n.value.fadeImage?n.value.inverted?1-c.value:c.value:void 0),l=d(()=>{var N,A;if(n.value.hide&&n.value.inverted)return 0;const g=((N=f.value)==null?void 0:N.contentHeight)??0,w=((A=f.value)==null?void 0:A.extensionHeight)??0;return g+w});Ve(d(()=>!!e.scrollBehavior),()=>{_e(()=>{n.value.hide?n.value.inverted?a.value=b.value>_.value:a.value=V.value||b.value<_.value:a.value=!0})});const{ssrBootStyles:r}=He(),{layoutItemStyles:z}=ie({id:e.name,order:d(()=>parseInt(e.order,10)),position:H(e,"location"),layoutSize:l,elementSize:S(void 0),active:a,absolute:H(e,"absolute")});return P(()=>{const g=Q.filterProps(e);return o(Q,U({ref:f,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...z.value,"--v-toolbar-image-opacity":u.value,height:void 0,...r.value},e.style]},g,{collapse:v.value,flat:m.value}),t)}),{}}}),Je=I({...xe({icon:"$menu",variant:"text"})},"VAppBarNavIcon"),We=L()({name:"VAppBarNavIcon",props:Je(),setup(e,h){let{slots:t}=h;return P(()=>o(O,U(e,{class:["v-app-bar-nav-icon"]}),t)),{}}}),Ke=L()({name:"VAppBarTitle",props:ce(),setup(e,h){let{slots:t}=h;return P(()=>o(de,U(e,{class:"v-app-bar-title"}),t)),{}}});const Qe=I({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...X(),...j(),...Z(),...ue(),...ee(),...q({tag:"footer"}),...te()},"VFooter"),Xe=L()({name:"VFooter",props:Qe(),setup(e,h){let{slots:t}=h;const{themeClasses:f}=ne(e),{backgroundColorClasses:a,backgroundColorStyles:n}=ae(H(e,"color")),{borderClasses:p}=oe(e),{elevationClasses:b}=le(e),{roundedClasses:_}=se(e),V=S(32),{resizeRef:c}=ke(u=>{u.length&&(V.value=u[0].target.clientHeight)}),v=d(()=>e.height==="auto"?V.value:parseInt(e.height,10)),{layoutItemStyles:m}=ie({id:e.name,order:d(()=>parseInt(e.order,10)),position:d(()=>"bottom"),layoutSize:v,elementSize:d(()=>e.height==="auto"?void 0:v.value),active:d(()=>e.app),absolute:H(e,"absolute")});return P(()=>o(e.tag,{ref:c,class:["v-footer",f.value,a.value,p.value,b.value,_.value,e.class],style:[n.value,e.app?m.value:{height:F(e.height)},e.style]},t)),{}}}),Ze=""+new URL("v3rb-e74dda82.png",import.meta.url).href;const et=e=>(Pe("data-v-cb4ded7f"),e=e(),Ne(),e),tt={key:1,class:"text-center"},at=et(()=>Ae("br",null,null,-1)),ot={__name:"FrontLayout",setup(e){const{apiAuth:h}=Re(),t=we(),f=Te(),a=Be(),{mobile:n}=Ce(),p=d(()=>n.value),b=G(!1),_=d(()=>[{to:"/sell",text:"二手商店",show:!0},{to:"/cart",icon:"mdi-heart-outline",show:a.isLogin},{icon:"mdi-login",show:!a.isLogin,subItems:[{to:"/login",text:"登入",icon:"mdi-login",show:!a.isLogin},{to:"/register",text:"註冊",icon:"mdi-account-plus",show:!a.isLogin}]},{icon:"mdi-account",show:a.isLogin,subItems:[{to:"/orders",text:"購買清單",icon:"mdi-clipboard-text-outline",show:a.isLogin},{to:"/user",text:"個人資料",icon:"mdi-account-outline",show:a.isLogin},{to:"/user/userproducts",text:"我的賣場",icon:"mdi-shopping-outline",show:a.isLogin},{to:"/user/userorders",text:"我的銷售",icon:"mdi-cash-fast",show:a.isLogin}]},{icon:"mdi-cog",show:a.isLogin&&a.isAdmin,subItems:[{to:"/admin",text:"管理員資料",icon:"mdi-account-outline",show:a.isLogin},{to:"/admin/products",text:"所有商品管理",icon:"mdi-shopping-outline",show:a.isLogin},{to:"/admin/orders",text:"所有訂單管理",icon:"mdi-clipboard-text-outline",show:a.isLogin}]}]),V=async()=>{var c,v;try{await h.delete("/users/logout"),a.logout(),f({text:"登出成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),t.push("/")}catch(m){const u=((v=(c=m==null?void 0:m.response)==null?void 0:c.data)==null?void 0:v.message)||"發生錯誤，請稍後再試";f({text:u,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}};return(c,v)=>{const m=J("RouterView"),u=J("VText");return i(),T(C,null,[p.value?(i(),y(Ee,{key:0,modelValue:b.value,"onUpdate:modelValue":v[0]||(v[0]=l=>b.value=l),temporary:"",location:"left"},{default:s(()=>[o(K,{nav:"",density:"compact"},{default:s(()=>[(i(!0),T(C,null,$(_.value,l=>(i(),T(C,{key:l},[l.subItems&&l.subItems.length>0?(i(),y(Ue,{key:0,modelValue:l.active,"onUpdate:modelValue":r=>l.active=r,"prepend-icon":l.icon},Le({default:s(()=>[(i(!0),T(C,null,$(l.subItems,r=>(i(),y(E,{key:r.to,to:r.to},{default:s(()=>[o(R,{class:"mx-2",icon:r.icon,size:18},null,8,["icon"]),x(B(r.text),1)]),_:2},1032,["to"]))),128))]),_:2},[l.show?{name:"activator",fn:s(({props:r})=>[o(E,U(r,{rounded:"xl"}),{default:s(()=>[o(M,null,{default:s(()=>[x(B(l.text),1)]),_:2},1024)]),_:2},1040)]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","prepend-icon"])):(i(),y(E,{key:1,to:l.to},{default:s(()=>[l.icon?(i(),y(R,{key:0,icon:l.icon},null,8,["icon"])):k("",!0),o(M,{style:{"text-align":"center"}},{default:s(()=>[x(B(l.text),1)]),_:2},1024)]),_:2},1032,["to"]))],64))),128)),W(a).isLogin?(i(),y(E,{key:0,onClick:V},{prepend:s(()=>[o(R,{icon:"mdi-logout"})]),default:s(()=>[o(M,null,{default:s(()=>[x("登出")]),_:1})]),_:1})):k("",!0)]),_:1})]),_:1},8,["modelValue"])):k("",!0),o(Ge,{class:"custom-app-bar bg",density:"compact",elevation:1},{default:s(()=>[o(ze,{class:"d-flex align-center"},{default:s(()=>[o(re,{to:"/",src:Ze,"max-height":"30","max-width":"30"}),o(O,{to:"/",active:!1},{default:s(()=>[o(Ke,{class:"hidden-sm-and-down"},{default:s(()=>[x("NEWSHOT 射箭器材交易")]),_:1})]),_:1}),o(Ie),p.value?(i(),y(We,{key:0,onClick:v[1]||(v[1]=l=>b.value=!0)})):(i(),T("div",tt,[(i(!0),T(C,null,$(_.value,l=>(i(),y(Me,{key:l.to,"open-on-hover":""},{activator:s(({props:r})=>[l.show?(i(),y(O,U({key:0},r,{text:"",key:l.to,to:l.to}),{default:s(()=>[l.icon?(i(),y(R,{key:0},{default:s(()=>[x(B(l.icon),1)]),_:2},1024)):k("",!0),x(B(l.text),1)]),_:2},1040,["to"])):k("",!0)]),default:s(()=>[l.subItems&&l.subItems.length>0?(i(),y(K,{key:0},{default:s(()=>[(i(!0),T(C,null,$(l.subItems,r=>(i(),y(E,{key:r.to,to:r.to},{default:s(()=>[r.show?(i(),y(M,{key:0},{default:s(()=>[o(R,{class:"mx-2",icon:r.icon,size:16},null,8,["icon"]),x(B(r.text),1)]),_:2},1024)):k("",!0)]),_:2},1032,["to"]))),128))]),_:2},1024)):k("",!0)]),_:2},1024))),128))])),W(a).isLogin?(i(),y(O,{key:2,"prepend-icon":"mdi-logout",onClick:V},{default:s(()=>[x("登出")]),_:1})):k("",!0)]),_:1})]),_:1}),o(Fe,{style:{"background-color":"#fff"}},{default:s(()=>[(i(),y(m,{key:c.$route.path}))]),_:1}),o(Xe,{style:{"background-color":"#E1E8EE"}},{default:s(()=>[o($e,{justify:"center","no-gutters":""},{default:s(()=>[o(De,{class:"text-center mt-4",cols:"12"},{default:s(()=>[o(u,{class:"caption"},{default:s(()=>[x("Copyright © "+B(new Date().getFullYear())+" Y.J. LIAO",1)]),_:1}),at,x("部分圖片來自於網路，僅做為學習用途。")]),_:1})]),_:1})]),_:1})],64)}}},mt=Se(ot,[["__scopeId","data-v-cb4ded7f"]]);export{mt as default};
