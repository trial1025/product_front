import{_ as P,M as v,L as k,K as w,O as B,P as f,R as y,S as a,c as t,a8 as R,V as b,a9 as m,Z as n,a1 as u,aa as A,J as S,ab as L,a2 as C,x as V,A as N,ac as T,Q as z,W as U,U as j,a5 as D,ad as F,ae as I}from"./index-2c4a6ffb.js";import{_ as M}from"./user-a7f6648a.js";import{V as c}from"./VCol-8d971aba.js";import{V as _}from"./VRow-3907badf.js";import{V as $}from"./VContainer-6b33fd8a.js";import{V as q}from"./VDivider-800c7117.js";const E={__name:"ProductCard",props:["_id","category","subs","condition","description","image","name","price","sell","account"],setup(o){const{apiAuth:g}=C(),d=v(),i=k(),p=w(),x=o,l=async()=>{var r,e;if(!d.isLogin){p.push("/login");return}try{const{data:s}=await g.post("/users/favorite",{product:x._id,quantity:0});d.favorite=s.result,i({text:"加入最愛成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}})}catch(s){const h=((e=(r=s==null?void 0:s.response)==null?void 0:r.data)==null?void 0:e.message)||"發生錯誤，請稍後再試";i({text:h,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}};return(r,e)=>{const s=B("RouterLink");return f(),y(L,{class:"product-card",rounded:"",hover:"",height:"350px","d-flex":"","justify-center":"",style:{"text-align":"left"}},{default:a(()=>[t(c,null,{default:a(()=>[t(_,null,{default:a(()=>[t(c,{cols:"2"},{default:a(()=>[t(R,{class:"mb-2",size:"30",style:{"margin-left":"10px"}},{default:a(()=>[t(b,{src:M})]),_:1})]),_:1}),t(c,{cols:"10"},{default:a(()=>[t(m,{class:"py-1 m-0"},{default:a(()=>[n(u(o.account),1)]),_:1})]),_:1})]),_:1}),t(b,{src:o.image,cover:"",style:{width:"90%",height:"200px",margin:"auto",borderRadius:"10px"}},null,8,["src"]),t(m,{class:"py-1"},{default:a(()=>[n(u(o.category),1),t(s,{class:"text-decoration-none",to:"/products/"+o._id,style:{"padding-top":"2px","padding-bottom":"2px",color:"black"}},{default:a(()=>[n(u(o.name),1)]),_:1},8,["to"])]),_:1})]),_:1}),t(_,null,{default:a(()=>[t(c,{class:"ml-2 py-0",cols:"7"},{default:a(()=>[t(m,{class:"p4",style:{"font-size":"large","font-weight":"bolder"}},{default:a(()=>[n("NT$"+u(o.price),1)]),_:1}),t(m,{class:"p4"},{default:a(()=>[n(u(o.condition),1)]),_:1})]),_:1}),t(c,{class:"ml-2 py-0",cols:"4"},{default:a(()=>[t(A,{class:"p4"},{default:a(()=>[t(S,{color:"red","prepend-icon":"mdi-cards-heart-outline",onClick:l})]),_:1})]),_:1})]),_:1})]),_:1})}}},J=P(E,[["__scopeId","data-v-bc7b710d"]]),K=D("h2",null,"商品列表",-1),X={__name:"SellView",setup(o){const g=v(),{apiAuth:d}=C(),i=k(),p=V([]),x=V({account:g.account});return N(async()=>{var l,r;try{const{data:e}=await d.get("/products",{params:{itemsPerPage:-1}}),s=e.result.data.filter(h=>h.account!==x.value.account);p.value.push(...s),await T()}catch(e){console.log(e);const s=((r=(l=e==null?void 0:e.response)==null?void 0:l.data)==null?void 0:r.message)||"發生錯誤，請稍後再試";i({text:s,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}}),(l,r)=>(f(),y($,null,{default:a(()=>[t(_,{justify:"center","align-item-center":""},{default:a(()=>[t(c,{cols:"8"},{default:a(()=>[K]),_:1}),t(q),t(c,{cols:"8"},{default:a(()=>[t(_,null,{default:a(()=>[(f(!0),z(j,null,U(p.value,e=>(f(),y(c,{class:"mb-4",key:e._id,cols:"12",md:"4",lg:"4",xl:"3"},{default:a(()=>[t(J,F(I(e)),null,16)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1}))}};export{X as default};
