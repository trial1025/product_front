import{p as L,m as X,a as q,g as I,u as N,c as l,b as ne,d as se,e as K,f as Q,h as Z,t as H,i as re,j as ie,k as ee,l as ue,n as ce,s as w,o as h,q as de,V as te,r as F,v as $,w as ve,x as j,y as me,z as D,A as ge,B as fe,C as he,D as be,E as ye,F as xe,G as C,H as Ve,I as _e,J as U,K as ke,L as Se,M as Be,N as pe,O as we,P as Te,Q as Ce,R as Le,S as Ie,T as Ne,U as Pe,W as E,_ as Ae,X as Re,Y as Ee,Z as He,$ as $e,a0 as De,a1 as u,a2 as T,a3 as y,a4 as r,a5 as k,a6 as R,a7 as z,a8 as Y,a9 as p,aa as Me,ab as M,ac as Ue}from"./index-f1a3df11.js";import{V as Fe,a as ze}from"./VNavigationDrawer-25fbfb85.js";import{u as Ye,V as G}from"./VList-ff2c12d4.js";import{V as O,a as W}from"./VListItem-a54c09d6.js";import{V as Oe}from"./VContainer-ac8b25ac.js";import{V as We}from"./VMenu-c12bfeaa.js";import"./VDivider-b9bd110d.js";const ae=L({text:String,...X(),...q()},"VToolbarTitle"),oe=I()({name:"VToolbarTitle",props:ae(),setup(e,c){let{slots:t}=c;return N(()=>{const g=!!(t.default||t.text||e.text);return l(e.tag,{class:["v-toolbar-title",e.class],style:e.style},{default:()=>{var o;return[g&&l("div",{class:"v-toolbar-title__placeholder"},[t.text?t.text():e.text,(o=t.default)==null?void 0:o.call(t)])]}})}),{}}}),Xe=[null,"prominent","default","comfortable","compact"],le=L({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>Xe.includes(e)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...ne(),...X(),...se(),...K(),...q({tag:"header"}),...Q()},"VToolbar"),J=I()({name:"VToolbar",props:le(),setup(e,c){var a;let{slots:t}=c;const{backgroundColorClasses:g,backgroundColorStyles:o}=Z(H(e,"color")),{borderClasses:s}=re(e),{elevationClasses:b}=ie(e),{roundedClasses:f}=ee(e),{themeClasses:x}=ue(e),{rtlClasses:V}=ce(),n=w(!!(e.extended||(a=t.extension)!=null&&a.call(t))),d=h(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),v=h(()=>n.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return de({VBtn:{variant:"text"}}),N(()=>{var i;const m=!!(e.title||t.title),_=!!(t.image||e.image),S=(i=t.extension)==null?void 0:i.call(t);return n.value=!!(e.extended||S),l(e.tag,{class:["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},g.value,s.value,b.value,f.value,x.value,V.value,e.class],style:[o.value,e.style]},{default:()=>[_&&l("div",{key:"image",class:"v-toolbar__image"},[t.image?l(F,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},t.image):l(te,{key:"image-img",cover:!0,src:e.image},null)]),l(F,{defaults:{VTabs:{height:$(d.value)}}},{default:()=>{var B,P,A;return[l("div",{class:"v-toolbar__content",style:{height:$(d.value)}},[t.prepend&&l("div",{class:"v-toolbar__prepend"},[(B=t.prepend)==null?void 0:B.call(t)]),m&&l(oe,{key:"title",text:e.title},{text:t.title}),(P=t.default)==null?void 0:P.call(t),t.append&&l("div",{class:"v-toolbar__append"},[(A=t.append)==null?void 0:A.call(t)])])]}}),l(F,{defaults:{VTabs:{height:$(v.value)}}},{default:()=>[l(ve,null,{default:()=>[n.value&&l("div",{class:"v-toolbar__extension",style:{height:$(v.value)}},[S])]})]})]})}),{contentHeight:d,extensionHeight:v}}}),qe=L({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function je(e){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:t}=c;let g=0;const o=j(null),s=w(0),b=w(0),f=w(0),x=w(!1),V=w(!1),n=h(()=>Number(e.scrollThreshold)),d=h(()=>me((n.value-s.value)/n.value||0)),v=()=>{const a=o.value;!a||t&&!t.value||(g=s.value,s.value="window"in a?a.pageYOffset:a.scrollTop,V.value=s.value<g,f.value=Math.abs(s.value-n.value))};return D(V,()=>{b.value=b.value||s.value}),D(x,()=>{b.value=0}),ge(()=>{D(()=>e.scrollTarget,a=>{var _;const m=a?document.querySelector(a):window;m&&m!==o.value&&((_=o.value)==null||_.removeEventListener("scroll",v),o.value=m,o.value.addEventListener("scroll",v,{passive:!0}))},{immediate:!0})}),fe(()=>{var a;(a=o.value)==null||a.removeEventListener("scroll",v)}),t&&D(t,v,{immediate:!0}),{scrollThreshold:n,currentScroll:s,currentThreshold:f,isScrollActive:x,scrollRatio:d,isScrollingUp:V,savedScroll:b}}const Ge=L({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...le(),...he(),...qe(),height:{type:[Number,String],default:64}},"VAppBar"),Je=I()({name:"VAppBar",props:Ge(),emits:{"update:modelValue":e=>!0},setup(e,c){let{slots:t}=c;const g=j(),o=be(e,"modelValue"),s=h(()=>{var B;const i=new Set(((B=e.scrollBehavior)==null?void 0:B.split(" "))??[]);return{hide:i.has("hide"),inverted:i.has("inverted"),collapse:i.has("collapse"),elevate:i.has("elevate"),fadeImage:i.has("fade-image")}}),b=h(()=>{const i=s.value;return i.hide||i.inverted||i.collapse||i.elevate||i.fadeImage||!o.value}),{currentScroll:f,scrollThreshold:x,isScrollingUp:V,scrollRatio:n}=je(e,{canScroll:b}),d=h(()=>e.collapse||s.value.collapse&&(s.value.inverted?n.value>0:n.value===0)),v=h(()=>e.flat||s.value.elevate&&(s.value.inverted?f.value>0:f.value===0)),a=h(()=>s.value.fadeImage?s.value.inverted?1-n.value:n.value:void 0),m=h(()=>{var P,A;if(s.value.hide&&s.value.inverted)return 0;const i=((P=g.value)==null?void 0:P.contentHeight)??0,B=((A=g.value)==null?void 0:A.extensionHeight)??0;return i+B});ye(h(()=>!!e.scrollBehavior),()=>{Ve(()=>{s.value.hide?s.value.inverted?o.value=f.value>x.value:o.value=V.value||f.value<x.value:o.value=!0})});const{ssrBootStyles:_}=Ye(),{layoutItemStyles:S}=xe({id:e.name,order:h(()=>parseInt(e.order,10)),position:H(e,"location"),layoutSize:m,elementSize:w(void 0),active:o,absolute:H(e,"absolute")});return N(()=>{const i=J.filterProps(e);return l(J,C({ref:g,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...S.value,"--v-toolbar-image-opacity":a.value,height:void 0,..._.value},e.style]},i,{collapse:d.value,flat:v.value}),t)}),{}}}),Ke=L({..._e({icon:"$menu",variant:"text"})},"VAppBarNavIcon"),Qe=I()({name:"VAppBarNavIcon",props:Ke(),setup(e,c){let{slots:t}=c;return N(()=>l(U,C(e,{class:["v-app-bar-nav-icon"]}),t)),{}}}),Ze=I()({name:"VAppBarTitle",props:ae(),setup(e,c){let{slots:t}=c;return N(()=>l(oe,C(e,{class:"v-app-bar-title"}),t)),{}}});const et=L({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:ke,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...X(),...Se({location:"top end"}),...K(),...q(),...Q(),...Be({transition:"scale-rotate-transition"})},"VBadge"),tt=I()({name:"VBadge",inheritAttrs:!1,props:et(),setup(e,c){const{backgroundColorClasses:t,backgroundColorStyles:g}=Z(H(e,"color")),{roundedClasses:o}=ee(e),{t:s}=pe(),{textColorClasses:b,textColorStyles:f}=we(H(e,"textColor")),{themeClasses:x}=Te(),{locationStyles:V}=Ce(e,!0,n=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(n)?+(e.offsetY??0):["left","right"].includes(n)?+(e.offsetX??0):0));return N(()=>{const n=Number(e.content),d=!e.max||isNaN(n)?e.content:n<=+e.max?n:`${e.max}+`,[v,a]=Le(c.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return l(e.tag,C({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},a,{style:e.style}),{default:()=>{var m,_;return[l("div",{class:"v-badge__wrapper"},[(_=(m=c.slots).default)==null?void 0:_.call(m),l(Ie,{transition:e.transition},{default:()=>{var S,i;return[Ne(l("span",C({class:["v-badge__badge",x.value,t.value,o.value,b.value],style:[g.value,f.value,e.inline?{}:V.value],"aria-atomic":"true","aria-label":s(e.label,n),"aria-live":"polite",role:"status"},v),[e.dot?void 0:c.slots.badge?(i=(S=c.slots).badge)==null?void 0:i.call(S):e.icon?l(E,{icon:e.icon},null):d]),[[Pe,e.modelValue]])]}})])]}})}),{}}}),at=""+new URL("v3-8b75baa1.png",import.meta.url).href;const ot={key:1,class:"text-center"},lt={__name:"FrontLayout",setup(e){const{apiAuth:c}=Ue(),t=Re(),g=Ee(),o=He(),{mobile:s}=$e(),b=h(()=>s.value),f=j(!1),x=h(()=>[{to:"/guide",text:"新手指南",show:!0},{to:"/sell",text:"二手商店",show:!0},{icon:"mdi-cart",show:!0,subItems:[{to:"/cart",text:"購物車",icon:"mdi-cart",show:!0},{to:"/orders",text:"訂單",icon:"mdi-list-box",show:!0}]},{icon:"mdi-account-circle",show:!o.isLogin,subItems:[{to:"/login",text:"登入",icon:"mdi-login",show:!o.isLogin},{to:"/register",text:"註冊",icon:"mdi-account-plus",show:!o.isLogin}]},{icon:"mdi-account-circle",show:o.isLogin,subItems:[{to:"/user",text:"個人資料",icon:"mdi-account-outline",show:o.isLogin},{to:"/user/userproducts",text:"我的商品",icon:"mdi-shopping-outline",show:o.isLogin},{to:"/user/userorders",text:"我的訂單",icon:"mdi-clipboard-text-outline",show:o.isLogin}]},{icon:"mdi-cog",show:o.isLogin&&o.isAdmin,subItems:[{to:"/admin",text:"個人資料",icon:"mdi-account-outline",show:o.isLogin},{to:"/admin/products",text:"商品管理",icon:"mdi-shopping-outline",show:o.isLogin},{to:"/admin/orders",text:"訂單管理",icon:"mdi-clipboard-text-outline",show:o.isLogin}]}]),V=async()=>{var n,d;try{await c.delete("/users/logout"),o.logout(),g({text:"登出成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),t.push("/")}catch(v){const a=((d=(n=v==null?void 0:v.response)==null?void 0:n.data)==null?void 0:d.message)||"發生錯誤，請稍後再試";g({text:a,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}};return(n,d)=>{const v=De("RouterView");return u(),T(R,null,[b.value?(u(),y(Fe,{key:0,modelValue:f.value,"onUpdate:modelValue":d[0]||(d[0]=a=>f.value=a),temporary:"",location:"left"},{default:r(()=>[l(G,{nav:""},{default:r(()=>[(u(!0),T(R,null,z(x.value,a=>(u(),T(R,{key:a.to},[a.show?(u(),y(O,{key:0,to:a.to},{prepend:r(()=>[l(E,{icon:a.icon},null,8,["icon"])]),append:r(()=>[a.to==="/cart"?(u(),y(tt,{key:0,color:"error",content:Y(o).cart,inline:""},null,8,["content"])):k("",!0)]),default:r(()=>[l(W,null,{default:r(()=>[p(M(a.text),1)]),_:2},1024)]),_:2},1032,["to"])):k("",!0)],64))),128)),Y(o).isLogin?(u(),y(O,{key:0,onClick:V},{prepend:r(()=>[l(E,{icon:"mdi-logout"})]),default:r(()=>[l(W,null,{default:r(()=>[p("登出")]),_:1})]),_:1})):k("",!0)]),_:1})]),_:1},8,["modelValue"])):k("",!0),l(Je,{class:"custom-app-bar bg",density:"compact",elevation:0},{default:r(()=>[l(Oe,{class:"d-flex align-center"},{default:r(()=>[l(te,{src:at,"max-height":"30","max-width":"30"}),l(U,{to:"/",active:!1},{default:r(()=>[l(Ze,null,{default:r(()=>[p("NEWSHOT")]),_:1})]),_:1}),l(Me),b.value?(u(),y(Qe,{key:0,onClick:d[1]||(d[1]=a=>f.value=!0)})):(u(),T("div",ot,[(u(!0),T(R,null,z(x.value,a=>(u(),y(We,{key:a.to,"open-on-hover":""},{activator:r(({props:m})=>[a.show?(u(),y(U,C({key:0},m,{text:"",key:a.to,to:a.to}),{default:r(()=>[a.icon?(u(),y(E,{key:0},{default:r(()=>[p(M(a.icon),1)]),_:2},1024)):k("",!0),p(M(a.text),1)]),_:2},1040,["to"])):k("",!0)]),default:r(()=>[a.subItems&&a.subItems.length>0?(u(),y(G,{key:0},{default:r(()=>[(u(!0),T(R,null,z(a.subItems,m=>(u(),y(O,{key:m.to,to:m.to},{default:r(()=>[m.show?(u(),y(W,{key:0},{default:r(()=>[l(E,{class:"mx-2",icon:m.icon,size:16},null,8,["icon"]),p(M(m.text),1)]),_:2},1024)):k("",!0)]),_:2},1032,["to"]))),128))]),_:2},1024)):k("",!0)]),_:2},1024))),128))])),Y(o).isLogin?(u(),y(U,{key:2,"prepend-icon":"mdi-logout",onClick:V},{default:r(()=>[p("登出")]),_:1})):k("",!0)]),_:1})]),_:1}),l(ze,null,{default:r(()=>[(u(),y(v,{key:n.$route.path}))]),_:1})],64)}}},vt=Ae(lt,[["__scopeId","data-v-ff02307c"]]);export{vt as default};
